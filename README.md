# My_2022TICup

# 作者

硬件部分：lxy

软件部分：SORMaker（负责控制部分代码）

​					Seven.（负责摄像头部分代码）

## 单片机

单片机用的是**TC264**（智能车的倔强）。使用的是逐飞的TC264开源库。

## 摄像头

摄像头用的**逐飞总钻风**。其他的没用上，发现总钻风就够了也就没用。其实用openmv也是可以的。

## 总体思路

#### 控制部分：

1.最基础的pid就不说了，行驶过程中速度是闭环的。

2.倒车用的编码器积路程。编码器转一圈会产生固定的脉冲，我们用的龙邱512线脉冲。就是轮子转一圈会产生512个脉冲。当时做的时候用的倒推法。先把小车放在车库中央，直接把舵机打满（因为舵机没有反馈，会有打角误差，所以直接打满，减少误差。）用手推着小车直接出来，当小车回正时，计算一下转弯半径，大约估计车轮转了几圈，然后编码器计数值就是 **圈数*512** 当达到这个数值时停车就好了。（**其实用过之后就会发现 编码器积路程误差还是有点大，也可能是我们没有优化的原因**）

其实比完之后想过用陀螺仪可能参数会好调一点。编码器调参实在是太痛苦了，主要还是参数太多了。

**还有一点就是，定时中断最好直接认为固定为1ms中断，在内部加一个计数标志位，这样比10ms中断准确一点，而且可操作性也高。**当时太赶了也就没弄。

3.倒车速度是开环到的，但是发现开环倒车有一个问题。就是停车的时候小车会因为没有制动自己滑行一段时间，所以在停车的时候也用了pid。（现在想来当时代码写的很奇怪，不过还算是糊弄的完赛了）。





